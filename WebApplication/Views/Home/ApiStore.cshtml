
@{
    ViewBag.Title = "ApiStore";
}

<h2>ApiStore</h2>
<div ng-app="myApp">
    <div ng-controller="myCtrl">
        <div ng-repeat="item in HeWeather">
            <div id="result">
                <a id="cityName"></a>
            </div>

            <div id="presentContext">
                <div>{{$index+1}} - {{item.basic.city}} - {{item.basic.cnty}} - {{item.basic.id}} - (经:{{item.basic.lat | currency }} 纬:{{item.basic.lon | currency }})</div>
                <div></div>
                <div></div>
            </div>
        </div>
        <button class="btn btn-default" id="getData">getData</button>
    </div>
</div>
@section scripts{
    <script>
        $(function () {
            $('#getData').click(function () {
                $.getJSON('/Home/GetWeather', { 'cityName': 'chaoyang' }, function (data) {

                    var obj = data['HeWeather data service 3.0'];

                    $(obj).each(function (i, item) {
                        if (item.status == 'ok') {
                            $('#result').append('<div><a id="cityName">' + item.basic.cnty + ' ' + item.basic.city + '</a></div>')
                        }
                    });



                    //$('#presentContext').html(JSON.stringify(data['HeWeather data service 3.0']));

                });
            })
        });
    </script>

    <script>

        var app = angular.module("myApp", []);
        app.controller("myCtrl", function ($scope) {
            $scope.HeWeather =[{ "basic": { "city": "朝阳", "cnty": "中国", "id": "CN101010300", "lat": "39.570000", "lon": "116.290000", "update": { "loc": "2015-12-25 17:05", "utc": "2015-12-25 09:05" } }, "daily_forecast": [{ "astro": { "sr": "07:33", "ss": "16:56" }, "cond": { "code_d": "502", "code_n": "501", "txt_d": "霾", "txt_n": "雾" }, "date": "2015-12-25", "hum": "28", "pcpn": "0.0", "pop": "0", "pres": "1017", "tmp": { "max": "1", "min": "-4" }, "vis": "10", "wind": { "deg": "231", "dir": "无持续风向", "sc": "微风", "spd": "5" } }, { "astro": { "sr": "07:33", "ss": "16:56" }, "cond": { "code_d": "100", "code_n": "101", "txt_d": "晴", "txt_n": "多云" }, "date": "2015-12-26", "hum": "40", "pcpn": "0.0", "pop": "0", "pres": "1026", "tmp": { "max": "4", "min": "-7" }, "vis": "10", "wind": { "deg": "123", "dir": "北风", "sc": "3-4", "spd": "12" } }, { "astro": { "sr": "07:34", "ss": "16:57" }, "cond": { "code_d": "101", "code_n": "100", "txt_d": "多云", "txt_n": "晴" }, "date": "2015-12-27", "hum": "53", "pcpn": "0.0", "pop": "0", "pres": "1036", "tmp": { "max": "-1", "min": "-6" }, "vis": "10", "wind": { "deg": "226", "dir": "无持续风向", "sc": "微风", "spd": "1" } }, { "astro": { "sr": "07:34", "ss": "16:57" }, "cond": { "code_d": "101", "code_n": "104", "txt_d": "多云", "txt_n": "阴" }, "date": "2015-12-28", "hum": "37", "pcpn": "0.0", "pop": "0", "pres": "1034", "tmp": { "max": "2", "min": "-4" }, "vis": "10", "wind": { "deg": "186", "dir": "无持续风向", "sc": "微风", "spd": "1" } }, { "astro": { "sr": "07:34", "ss": "16:58" }, "cond": { "code_d": "104", "code_n": "101", "txt_d": "阴", "txt_n": "多云" }, "date": "2015-12-29", "hum": "40", "pcpn": "0.0", "pop": "0", "pres": "1027", "tmp": { "max": "2", "min": "-5" }, "vis": "10", "wind": { "deg": "141", "dir": "无持续风向", "sc": "微风", "spd": "9" } }, { "astro": { "sr": "07:34", "ss": "16:59" }, "cond": { "code_d": "101", "code_n": "101", "txt_d": "多云", "txt_n": "多云" }, "date": "2015-12-30", "hum": "25", "pcpn": "0.0", "pop": "0", "pres": "1026", "tmp": { "max": "5", "min": "-6" }, "vis": "10", "wind": { "deg": "295", "dir": "无持续风向", "sc": "微风", "spd": "9" } }, { "astro": { "sr": "07:35", "ss": "17:00" }, "cond": { "code_d": "101", "code_n": "100", "txt_d": "多云", "txt_n": "晴" }, "date": "2015-12-31", "hum": "23", "pcpn": "0.0", "pop": "0", "pres": "1024", "tmp": { "max": "4", "min": "-6" }, "vis": "10", "wind": { "deg": "318", "dir": "无持续风向", "sc": "微风", "spd": "4" } }], "hourly_forecast": [{ "date": "2015-12-25 16:00", "hum": "34", "pop": "0", "pres": "1017", "tmp": "4", "wind": { "deg": "218", "dir": "西南风", "sc": "微风", "spd": "8" } }, { "date": "2015-12-25 19:00", "hum": "36", "pop": "0", "pres": "1018", "tmp": "1", "wind": { "deg": "254", "dir": "西南风", "sc": "微风", "spd": "6" } }, { "date": "2015-12-25 22:00", "hum": "36", "pop": "0", "pres": "1018", "tmp": "-4", "wind": { "deg": "327", "dir": "西北风", "sc": "微风", "spd": "8" } }], "now": { "cond": { "code": "502", "txt": "霾" }, "fl": "-6", "hum": "93", "pcpn": "0", "pres": "1016", "tmp": "-3", "vis": "1", "wind": { "deg": "140", "dir": "东南风", "sc": "3-4", "spd": "16" } }, "status": "ok", "suggestion": { "comf": { "brf": "较不舒适", "txt": "白天天气阴沉，您会感觉偏冷，不很舒适，请注意添加衣物，以防感冒。" }, "cw": { "brf": "不宜", "txt": "不宜洗车，未来24小时内有霾，如果在此期间洗车，会弄脏您的爱车。" }, "drsg": { "brf": "冷", "txt": "天气冷，建议着棉服、羽绒服、皮夹克加羊毛衫等冬季服装。年老体弱者宜着厚棉衣、冬大衣或厚羽绒服。" }, "flu": { "brf": "极易发", "txt": "将有一次强降温过程，天气寒冷，且空气湿度较大，极易发生感冒，请特别注意增加衣服保暖防寒。" }, "sport": { "brf": "较不宜", "txt": "有雾或霾且室外很冷，建议适当停止户外运动，选择在室内进行运动，以避免吸入过多雾中有害物质，损害健康。" }, "trav": { "brf": "较不宜", "txt": "空气质量差，不适宜旅游" }, "uv": { "brf": "最弱", "txt": "属弱紫外线辐射天气，无需特别防护。若长期在户外，建议涂擦SPF在8-12之间的防晒护肤品。" } } }, { "basic": { "city": "朝阳", "cnty": "中国", "id": "CN101071201", "lat": "41.579000", "lon": "120.456000", "update": { "loc": "2015-12-25 17:05", "utc": "2015-12-25 09:05" } }, "daily_forecast": [{ "astro": { "sr": "07:22", "ss": "16:33" }, "cond": { "code_d": "100", "code_n": "101", "txt_d": "晴", "txt_n": "多云" }, "date": "2015-12-25", "hum": "30", "pcpn": "0.0", "pop": "0", "pres": "1014", "tmp": { "max": "1", "min": "-14" }, "vis": "10", "wind": { "deg": "286", "dir": "西风", "sc": "3-4", "spd": "12" } }, { "astro": { "sr": "07:23", "ss": "16:33" }, "cond": { "code_d": "100", "code_n": "100", "txt_d": "晴", "txt_n": "晴" }, "date": "2015-12-26", "hum": "15", "pcpn": "0.0", "pop": "0", "pres": "1031", "tmp": { "max": "-7", "min": "-19" }, "vis": "10", "wind": { "deg": "359", "dir": "北风", "sc": "4-5", "spd": "21" } }, { "astro": { "sr": "07:23", "ss": "16:34" }, "cond": { "code_d": "100", "code_n": "100", "txt_d": "晴", "txt_n": "晴" }, "date": "2015-12-27", "hum": "12", "pcpn": "0.0", "pop": "0", "pres": "1034", "tmp": { "max": "-4", "min": "-15" }, "vis": "10", "wind": { "deg": "220", "dir": "南风", "sc": "3-4", "spd": "16" } }, { "astro": { "sr": "07:23", "ss": "16:35" }, "cond": { "code_d": "100", "code_n": "101", "txt_d": "晴", "txt_n": "多云" }, "date": "2015-12-28", "hum": "31", "pcpn": "0.0", "pop": "0", "pres": "1033", "tmp": { "max": "2", "min": "-11" }, "vis": "10", "wind": { "deg": "212", "dir": "西南风", "sc": "微风", "spd": "9" } }, { "astro": { "sr": "07:24", "ss": "16:35" }, "cond": { "code_d": "101", "code_n": "101", "txt_d": "多云", "txt_n": "多云" }, "date": "2015-12-29", "hum": "39", "pcpn": "0.0", "pop": "0", "pres": "1025", "tmp": { "max": "2", "min": "-11" }, "vis": "10", "wind": { "deg": "204", "dir": "西南风", "sc": "3-4", "spd": "14" } }, { "astro": { "sr": "07:24", "ss": "16:36" }, "cond": { "code_d": "100", "code_n": "100", "txt_d": "晴", "txt_n": "晴" }, "date": "2015-12-30", "hum": "31", "pcpn": "0.0", "pop": "0", "pres": "1022", "tmp": { "max": "3", "min": "-12" }, "vis": "10", "wind": { "deg": "335", "dir": "西北风", "sc": "3-4", "spd": "10" } }, { "astro": { "sr": "07:24", "ss": "16:37" }, "cond": { "code_d": "100", "code_n": "104", "txt_d": "晴", "txt_n": "阴" }, "date": "2015-12-31", "hum": "36", "pcpn": "0.0", "pop": "0", "pres": "1016", "tmp": { "max": "-1", "min": "-12" }, "vis": "10", "wind": { "deg": "315", "dir": "西南风", "sc": "3-4", "spd": "14" } }], "hourly_forecast": [{ "date": "2015-12-25 16:00", "hum": "39", "pop": "0", "pres": "1014", "tmp": "-2", "wind": { "deg": "258", "dir": "西南风", "sc": "微风", "spd": "14" } }, { "date": "2015-12-25 19:00", "hum": "48", "pop": "0", "pres": "1015", "tmp": "-6", "wind": { "deg": "94", "dir": "东风", "sc": "微风", "spd": "9" } }, { "date": "2015-12-25 22:00", "hum": "47", "pop": "0", "pres": "1017", "tmp": "-9", "wind": { "deg": "43", "dir": "东北风", "sc": "微风", "spd": "9" } }], "now": { "cond": { "code": "100", "txt": "晴" }, "fl": "-4", "hum": "38", "pcpn": "0", "pres": "1014", "tmp": "2", "vis": "10", "wind": { "deg": "277", "dir": "西南风", "sc": "4-5", "spd": "21" } }, "status": "ok", "suggestion": { "comf": { "brf": "较不舒适", "txt": "白天天气晴好，但仍会使您感觉偏冷，不很舒适，请注意适时添加衣物，以防感冒。" }, "cw": { "brf": "较适宜", "txt": "较适宜洗车，未来一天无雨，风力较小，擦洗一新的汽车至少能保持一天。" }, "drsg": { "brf": "寒冷", "txt": "天气寒冷，建议着厚羽绒服、毛皮大衣加厚毛衣等隆冬服装。年老体弱者尤其要注意保暖防冻。" }, "flu": { "brf": "极易发", "txt": "天气寒冷，且昼夜温差很大，极易发生感冒。请特别注意增加衣服保暖防寒。" }, "sport": { "brf": "较不宜", "txt": "天气较好，但考虑天气寒冷，风力较强，推荐您进行室内运动，若户外运动请注意保暖并做好准备活动。" }, "trav": { "brf": "一般", "txt": "天气较好，温度稍低，而且风稍大，让您感觉有些冷，会对外出有一定影响，外出注意防风保暖。" }, "uv": { "brf": "弱", "txt": "紫外线强度较弱，建议出门前涂擦SPF在12-15之间、PA+的防晒护肤品。" } } }, { "basic": { "city": "潮阳", "cnty": "中国", "id": "CN101280502", "lat": "23.160000", "lon": "116.350000", "update": { "loc": "2015-12-25 17:06", "utc": "2015-12-25 09:06" } }, "daily_forecast": [{ "astro": { "sr": "06:52", "ss": "17:35" }, "cond": { "code_d": "104", "code_n": "104", "txt_d": "阴", "txt_n": "阴" }, "date": "2015-12-25", "hum": "71", "pcpn": "3.4", "pop": "99", "pres": "1021", "tmp": { "max": "19", "min": "16" }, "vis": "10", "wind": { "deg": "4", "dir": "东北风", "sc": "3-4", "spd": "14" } }, { "astro": { "sr": "06:53", "ss": "17:36" }, "cond": { "code_d": "101", "code_n": "104", "txt_d": "多云", "txt_n": "阴" }, "date": "2015-12-26", "hum": "60", "pcpn": "0.0", "pop": "1", "pres": "1021", "tmp": { "max": "19", "min": "16" }, "vis": "10", "wind": { "deg": "36", "dir": "东北风", "sc": "3-4", "spd": "10" } }, { "astro": { "sr": "06:53", "ss": "17:37" }, "cond": { "code_d": "104", "code_n": "104", "txt_d": "阴", "txt_n": "阴" }, "date": "2015-12-27", "hum": "77", "pcpn": "0.4", "pop": "76", "pres": "1022", "tmp": { "max": "20", "min": "15" }, "vis": "10", "wind": { "deg": "47", "dir": "东北风", "sc": "3-4", "spd": "12" } }, { "astro": { "sr": "06:54", "ss": "17:37" }, "cond": { "code_d": "101", "code_n": "101", "txt_d": "多云", "txt_n": "多云" }, "date": "2015-12-28", "hum": "66", "pcpn": "1.0", "pop": "75", "pres": "1025", "tmp": { "max": "19", "min": "14" }, "vis": "10", "wind": { "deg": "48", "dir": "东北风", "sc": "3-4", "spd": "15" } }, { "astro": { "sr": "06:54", "ss": "17:38" }, "cond": { "code_d": "101", "code_n": "101", "txt_d": "多云", "txt_n": "多云" }, "date": "2015-12-29", "hum": "57", "pcpn": "0.0", "pop": "0", "pres": "1024", "tmp": { "max": "20", "min": "13" }, "vis": "10", "wind": { "deg": "47", "dir": "东北风", "sc": "3-4", "spd": "15" } }, { "astro": { "sr": "06:54", "ss": "17:38" }, "cond": { "code_d": "101", "code_n": "101", "txt_d": "多云", "txt_n": "多云" }, "date": "2015-12-30", "hum": "51", "pcpn": "0.0", "pop": "0", "pres": "1022", "tmp": { "max": "21", "min": "14" }, "vis": "10", "wind": { "deg": "14", "dir": "东北风", "sc": "3-4", "spd": "15" } }, { "astro": { "sr": "06:55", "ss": "17:39" }, "cond": { "code_d": "101", "code_n": "100", "txt_d": "多云", "txt_n": "晴" }, "date": "2015-12-31", "hum": "43", "pcpn": "0.0", "pop": "0", "pres": "1023", "tmp": { "max": "20", "min": "14" }, "vis": "10", "wind": { "deg": "39", "dir": "东北风", "sc": "微风", "spd": "5" } }], "hourly_forecast": [{ "date": "2015-12-25 16:00", "hum": "67", "pop": "5", "pres": "1020", "tmp": "21", "wind": { "deg": "41", "dir": "东北风", "sc": "3-4", "spd": "17" } }, { "date": "2015-12-25 19:00", "hum": "80", "pop": "1", "pres": "1022", "tmp": "20", "wind": { "deg": "57", "dir": "东北风", "sc": "微风", "spd": "15" } }, { "date": "2015-12-25 22:00", "hum": "86", "pop": "0", "pres": "1023", "tmp": "18", "wind": { "deg": "55", "dir": "东北风", "sc": "微风", "spd": "15" } }], "now": { "cond": { "code": "104", "txt": "阴" }, "fl": "18", "hum": "72", "pcpn": "?", "pres": "1020", "tmp": "17", "vis": "10", "wind": { "deg": "10", "dir": "东北风", "sc": "4-5", "spd": "22" } }, "status": "ok", "suggestion": { "comf": { "brf": "舒适", "txt": "白天不太热也不太冷，风力不大，相信您在这样的天气条件下，应会感到比较清爽和舒适。" }, "cw": { "brf": "不宜", "txt": "不宜洗车，未来24小时内有雨，如果在此期间洗车，雨水和路上的泥水可能会再次弄脏您的爱车。" }, "drsg": { "brf": "较舒适", "txt": "建议着薄外套、开衫牛仔衫裤等服装。年老体弱者应适当添加衣物，宜着夹克衫、薄毛衣等。" }, "flu": { "brf": "较易发", "txt": "相对今天出现了较大幅度降温，较易发生感冒，体质较弱的朋友请注意适当防护。" }, "sport": { "brf": "较适宜", "txt": "阴天，较适宜进行各种户内外运动。" }, "trav": { "brf": "适宜", "txt": "天气较好，风稍大，但温度适宜，总体来说还是好天气。这样的天气适宜旅游，您可以尽情享受大自然的风光。" }, "uv": { "brf": "最弱", "txt": "属弱紫外线辐射天气，无需特别防护。若长期在户外，建议涂擦SPF在8-12之间的防晒护肤品。" } } }];
            $scope.lastName = "Doe";
        });

    </script>
}

